# Javascript闭包

所谓闭包就是外部函数执行返回一个函数，返回的这个函数用到了私有变量，这时内部变量与外部有关联就不会被垃圾回收，**闭包是将函数内部与函数外部连接起来的桥梁**

优点：

> 函数变量私有化，避免污染全局变量
>
> 从外部读取局部变量

缺点：

> 长期占用内存空间不释放，容易造成内存泄漏

经典面试题

```js
for(var i = 0; i < 5; i++) {
  setTimeout(()=>{ 
    console.log(i);
  })
}
```

会输出5个5

同步代码优先执行，setTimeout属于异步任务，宏任务队列

同步代码执行完毕之后，才开始执行setTimeout内的函数，这时i早已变成5

```js
for(var i = 0; i < 5; i++) {
  (function(i){
    setTimeout(()=>{
      console.log(i);
    })
  })(i)
}
```





